<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>M√≥n qu√† nh·ªè c·ªßa anh</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
<style>
body {
  font-family: 'Inter', Arial, sans-serif;
  display: flex;
  flex-direction: column;
  align-items: center;
  background-color: #fffacd;
  padding: 20px;
  position: relative;
  min-height: 100vh;
  box-sizing: border-box;
  justify-content: center
}

h1, h2 {
  color: #333;
  margin-bottom: 5px;
  font-weight: 700
}

p.subtitle {
  font-size: 1em;
  color: #666;
  margin-top: 0;
  margin-bottom: 20px
}

#loginContainer {
  display: flex;
  flex-direction: column;
  align-items: center;
  background: white;
  padding: 30px 40px;
  border-radius: 12px;
  box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
  width: 100%;
  max-width: 400px
}

#loginContainer h2 {
  margin-top: 0;
  margin-bottom: 20px
}

#loginContainer div {
  margin-bottom: 15px;
  width: 100%
}

#loginContainer label {
  display: block;
  margin-bottom: 8px;
  font-weight: 500;
  color: #555
}

#loginContainer input[type="text"],
#loginContainer input[type="password"] {
  width: 100%;
  padding: 12px;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  font-size: 16px
}

#loginError {
  color: #dc3545;
  font-size: 14px;
  height: 20px;
  text-align: center
}

#loginButton {
  background-color: #ff69b4;
}

.loginButton:hover {
  background-color: #e0529d
}

.hidden {
  display: none !important
}

#photoboothApp {
  display: none;
  flex-direction: column;
  align-items: center;
  width: 100%
}

.booth-container {
  display: flex;
  flex-direction: column;
  gap: 0;
  align-items: center;
  justify-content: center;
  margin: 25px 0;
  width: 100%;
  max-width: 640px;
}

video {
  width: 100%;
  height: auto;
  aspect-ratio: 16 / 9;
  object-fit: cover;
  transform: scaleX(-1);
  border: 6px solid #ff69b4;
  border-radius: 15px;
  background-color: white;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
}

canvas {
  display: none;
}

button {
  padding: 10px 20px;
  margin: 5px;
  background-color: #ff69b4;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: bold;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  transition: background-color 0.3s, transform 0.2s;
  font-size: 16px
}

button:hover {
  background-color: #e0529d;
  transform: translateY(-2px)
}

button:disabled {
  background-color: #ccc;
  cursor: not-allowed;
  transform: none !important
}

#controls {
  margin-bottom: 15px
}

#statusContainer {
  display: flex;
  justify-content: space-around;
  width: 100%;
  max-width: 700px;
  background: #fff;
  padding: 18px;
  border-radius: 12px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
  margin-top: 20px
}

.status-item {
  text-align: center;
  font-size: 19px;
  font-weight: bold;
  color: #444
}

.status-item span {
  display: block;
  font-size: 26px;
  color: #ff69b4;
  margin-top: 6px
}

#filterControls {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 8px;
  margin-bottom: 20px
}

.filter-btn {
  background-color: #f8c5e0;
  color: #555;
  font-size: 13px;
  padding: 7px 14px;
  border-radius: 20px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1)
}

.filter-btn:hover {
  background-color: #f5b0d0
}

#takePhotoBtn {
  background-color: #8e2de2
}

.takePhotoBtn:hover {
  background-color: #741bb7
}

#restartButton {
  background-color: #ffd700;
  color: #333
}

.restartButton:hover {
  background-color: #e6c200
}

#downloadButton {
  background-color: #00bfff
}

.downloadButton:hover {
  background-color: #0099cc
}

.photo-actions button {
  background-color: #ff4d4d
}

.photo-actions button:hover {
  background-color: #e63939
}

.gallery {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
  gap: 12px;
  width: 100%;
  max-width: 800px;
  margin-top: 25px
}

.photo-item {
  position: relative;
  border-radius: 12px;
  overflow: hidden;
  background: #fff;
  display: flex;
  flex-direction: column;
  align-items: center;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  padding-bottom: 8px;
  transition: transform 0.2s ease
}

.photo-item:hover {
  transform: translateY(-5px)
}

.photo-item img {
  width: 100%;
  height: auto;
  display: block;
  border-radius: 10px
}

.photo-actions {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-top: 8px
}

.photo-actions input[type="checkbox"] {
  transform: scale(1.3);
  cursor: pointer
}

.photo-actions input[type="checkbox"]:disabled {
  cursor: not-allowed
}

.counter {
  margin: 10px;
  font-size: 17px;
  color: #444;
  font-weight: bold
}

#selectionMessage {
  color: #dc3545;
  font-size: 15px;
  height: 22px;
  font-weight: bold
}
</style>
</head>

<body>
<div id="loginContainer">
  <h2>üîí ƒêƒÉng nh·∫≠p PhotoBooth ƒëeeeeeeee</h2>
  <div>
    <label for="username">T√†i kho·∫£n:</label>
    <input type="text" id="username" name="username">
  </div>
  <div>
    <label for="password">M·∫≠t kh·∫©u:</label>
    <input type="password" id="password" name="password">
  </div>
  <p id="loginError"></p>
  <button id="loginButton">ƒêƒÉng nh·∫≠p nh√≥oo</button>
</div>
<div id="photoboothApp" class="hidden">
  <h1>‚ú® PhotoBooth c·ªßa Ph∆∞∆°ng Thy ‚ú®</h1>
  <p class="subtitle">em b√© iu c·ªßa NT :3</p>
  <div id="statusContainer">
    <div class="status-item">Th·ªùi gian<span id="timerDisplay">20</span></div>
    <div class="status-item">S·ªë ·∫£nh<span id="photoCountDisplay">0 / 10</span></div>
  </div>
  <div class="booth-container">
    <video id="video" autoplay playsinline></video>
    <canvas id="canvas"></canvas>
  </div>
  <div id="filterControls">
    <button class="filter-btn" data-filter="none">B√¨nh th∆∞·ªùng</button>
    <button class="filter-btn" data-filter="vintage">C·ªï ƒëi·ªÉn</button>
    <button class="filter-btn" data-filter="warm">·∫§m √°p</button>
    <button class="filter-btn" data-filter="cool">L·∫°nh</button>
  </div>
  <div id="controls">
    <button id="startButton">‚ñ∂ B·∫Øt ƒë·∫ßu</button>
    <button id="takePhotoBtn" class="hidden">üì∏ Ch·ª•p ·∫¢nh</button>
    <button id="restartButton" class="hidden">üîÑ L√†m l·∫°i</button>
  </div>
  <hr style="width: 80%; border: 1px solid #ddd; margin: 15px 0;">
  <h2>Th∆∞ vi·ªán ·∫£nh</h2>
  <p>Sau khi ch·ª•p xong, em ch·ªçn t·ªëi ƒëa 6 ·∫£nh ƒë·∫πp nh·∫•t</p>
  <div class="counter">·∫¢nh ƒë√£ ch·ªçn: <span id="selectedCount">0</span> / 6</div>
  <p id="selectionMessage"></p>
  <div class="gallery" id="photoGallery"></div>
  <button id="downloadButton" disabled>‚¨áÔ∏è T·∫£i 6 ·∫£nh ƒë√£ ch·ªçn v·ªÅ khung</button>
</div>

<div id="stickerAssets" style="display: none;">
  <img id="sticker-bear" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAaVBMVEX///8AAAD8/Pzw8PCGhoYNDQ3y8vKysrITExP09PTp6em7u7ulpaWtra3FxcXNzc0/Pz8TExPZ2dmBgYEbGxuioqJ6enqenp5NTU1bW1uIiIgYGBhpaWmZmZlVVVUhISHm5uZGRkY1NTUvLy+vve5fAAAEpElEQVR4nO3dbVviMBCG4SSQBgRExVWBilr0/V/nprtbG4xEiJ1p553P+6FM1MlkE5rDHgAAAAAAAAAAAAAAAAAAAAAAAAAAAP87Ojq6U9d1+3u9Xv/Ybrc/13W953neU5IkHZrP57cSifB7TNN0n6Zp+3O53K+Px+N/3Ld+/HI6nbcxxm0SQfljPB4/pJR+GbMsy5+llAIApZQBAKVUWZY/RxQBYBimLMuSArAsS+lUHMdZlmX7WZZ9Snm9qSiKoiiKaZrWsix/iiJKAeB5XiKRyGazWafTet55nlcp5feaph2llD8kSXAcd5qm22q1/rPdbv+kadrr9XoBwHmeXdd1XddbLBar1Wp9M5vNL7Ozs7+lUqlXFEWllM/zHBsbq5RiGIahUHjRarV+m5mZ+VdpaWnv0un0i8Vi8Xq9/plSqfQLWZZvCOH7mqaNrutU9vPz818WFxdPdbvdX0tLS7+lUql/HMebSqmUciil7+/v51NK37Ozs58AwPN8lmWz2WxKqSiKwzAMAMYYhmFsNpssyzAMW1asrq5+W1tbq1Qq/YlSqXwiSXIsyz5NKaX8PGOMUsoYwzCM1WolUqlMJhMKhcLhcNjn+fPz83Nzc1er1epf19fXjx0dHafT6YcYY6lU+t3Q0FArlUrpdDqdTmcwGNRqtUwmc+r1emlp6dDQ0FAqlf7b2tpSSgEAgEql2tra+vX19UqlUpbltVptZ2dnbW1tqVRaX1+v1WoVi8WSyWS5XO7s7Ox3n8/nZ2dnpVIpYwxjLBaLRCLt7e3t7e1VVVWlUikmkymVSoIgCCGEEEKlUuF5XqvVCgAqlcrJyQlCCACO481mMyEEruvK5XLz8/NKpRIPxyYSiWQyqZSipmljDABCiEajYRjGEIIxxmg0GoZhkiQhhLquSZIYY0IIu64LgiBJEoZhkiQsy+v1ulqtpmmKomiaplQqhc1mSyQS9ff3z8/PTyaTyWQyWZYVi8WQyWRTU1NjY2NTU1NzOBxOp9NatXp2dvb4+PhfPzw8bDabGIYRitqyrFQq9fn5eVVVlVJpVFXV4XCYpunp6enx8fHt7e2trS2llFar1el0qlar4XBYVVWVruvj4+Pp6enV1dXd3d0//vT09OTkRFWViEQikUgsFotIJEIIIZPJDA4ONpvNlFKEEKWUpmmSJAkheJ7nmqY1m81ms1kcx0kSpmmK4ziO4wAAxhgAgDEGAADGGAAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQCA1tbWNwghhBBCCCFEkiTlcrnP53M4HLvd7uFw2Gw2RVE8z3Nc15Mk+W+apr0z5JsmScqyrFar4XBYrVYdHx9vb28XDoclSXIsy5qmCYIgSZLJZDIcx7ZtU0phGAYhBEKIpmmCIHA8L4piLpcrFApFUbS1tbW/v395eXlxcbFarTqdjgwGAyGEEMdxhmHous6yzLFYDAAwTRPGGEKImqZJEhiG0XUdxtvtdpfLZUqpUqpms7m8vHx+fv78/Lxara5UKiEEhBDGGIZBJBLxer1qtfro0aOtrS0AwDAMruv2er0sy3EcD4VCubm5OTEx8fLyMpvNdnZ2fD6fIAiKoihJkuM4XdeVSubt7W0qlYIg6HA4HMeRJImmacMwCIIQiUQYY5vN9vT09OTkRC6Xy+VylVLKsqxara5Wq8vLy6uqqjAMYxhmkiRpNBrlcvnQ0NCjR49OTk4AACGEECJJEkajUavVKpXK3t7exsbGxsZGvV5vbW0tFosBADDGbrfbaDSWlpYuLy+vqqoaGhpCoVDY7fYgCAAAeZ6nadrJyQkAAAAAAAAAAAAAAAB+kn8By4U/b1lT2EcAAAAASUVORK5CYII=">
  <img id="sticker-cat" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAaVBMVEX///8AAAD8/Pzw8PCGhoYNDQ3y8vKysrITExP09PTp6em7u7ulpaWtra3FxcXNzc0/Pz8TExPZ2dmBgYEbGxuioqJ6enqenp5NTU1bW1uIiIgYGBhpaWmZmZlVVVUhISHm5uZGRkY1NTUvLy+vve5fAAADvElEQVR4nO3dyXqiMBCG4SABFaUUxAVB8fz/n7pSA4kQO9POnM/7fMkkZDKZTGo9DwAAAAAAAAAAAAAAAADAr+jo6PzUdd0/rtfrHx6Pxx/r9fp7Xdd/SJKEI5HIv4lEwh/q9fqf6XR6z/P8W57nP7Is+8+y7N/Pzs5+m5+f/13WdX9NKaX0P0sprq+v7+/vb2+llH+GEEII8zz/WZblz1LKv6SUFEV5nldK6X+WUEqllFJKf4wxSintn6WUWZY/Sxnl+0qpLMvfKIrgOF5VVdV1vSAI/jBN8w8hhM/zvM/z/Ndsttu8tLR0x+Pxm7qu/1mW5e/xeHwaDoc/1Ov173mev0spRVE0Njb28vJyWZZlWRZF8ff7/S9lWf5tfn7+qdVq/ZBl2b+UUp7nlVIqpeQ4zmQyGY/HT5vN5uPj4yRJ8jyv6/rW1taWlpaura1tf39/c3OzXC6fmpqaX15ePp1O/ywMw8dxHJfLpVRKaZriOG7bthBCpZQsy/Pz81QqlWKxODc3t7S0dHp6uqoqqVSqUqlEQlFKSZIYY4RQuVxuNptTqcRxfDweTyaTSqmSJEmStNlsXlhY2NzcXFtb+9bW1tbW1nQ6/ZBlWYZhyuWyLMtCCHEcZ1lmWRbDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzD+DeO4xNPhuGkpmndbrcvLS3Nzc11Op3dbncsFkMQhCTJZrO52WwODw8fHx8fHx8fHx9/fHycpmmSJEnT9Pr6+vLy8urq6urq6urq6tTU1Nra2v7+/v7+/vLy8vr6+vj4eDqdPjw8zGazWZZFCDGbzdZ1XVmWKYoSicQsy4QQWZYdDodCCCHEDMOEEI1GQwgxTRNGyPO8KAohxBjjmubq6mpHR0dd15vN5lAoFJfLpZQihKSUrutpmtI0pdPppFIpJpNZXl6urq4ODQ0tLS2tqqpqbGxsbW2tVqvt7e2tbW1tbW1NTU1FRUWNjY1KpVJKSZIkRVE0TRNCRFEUjuPwPA8hZFlW1/Xb29uvXr26ublZrVZrmubx8bFarb7y8vLw8LCiKAkhxhgIITHGyWQyHA6zLGuapiiKUqlUJBJpNJqqqmpwcLCiKDzP6+vrR0ZGhoeH6+vrsyz7+/t7NBpNTU0NDQ0NCAgQiURisdjg4ODw8PDKysrV1dXW1tarV69ubW3tdDqNRqNcLkeSJEIIIYTxeFyv1wcGBoZCoXK5HACEEGI8Hq+urkIIYRgmSZKWlpaGhoZ2d3dra2uDwWAcxyGEEEJYlmVZFgBCCCEhhBCllM/neZ6XUvqfOI7r9frOzs729vYDAwMHBweHh4dHRkZWV1deXl5TU1NRURFHUZRSNE2TyWSz2ZIkCQAAAAAAAAAAAAAAAAAAAAAAAAAAAPwz/wG5m36d1CRyAQAAAABJRU5ErkJggg==">
  <img id="sticker-frog" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAaVBMVEX///8AAAD8/Pzw8PCGhoYNDQ3y8vKysrITExP09PTp6em7u7ulpaWtra3FxcXNzc0/Pz8TExPZ2dmBgYEbGxuioqJ6enqenp5NTU1bW1uIiIgYGBhpaWmZmZlVVVUhISHm5uZGRkY1NTUvLy+vve5fAAACvklEQVR4nO3d63KbMBRGYSBIVFAExUUUi+L//7oOlGAn9pDs9q3l4/M0w0zIZLLpNR4AAAAAAAAAAAAAAACAe+ro6EjdNf3S6/WPj8fj94/H4+/1dV2EEFZVVbIsQwiTySQEQiKReDwez/O+KIqmaUqShMPhMpvNhBBBEARBkCRJwzAIISiKgiAIvu9FUYwxvu+TJGma5vF4oiiKoqgQwqZpvu9jGOZ53nUdpZTzPEIIHMfpOE4pFUUhhCiKQghFUbIsY4xFUUhSlFKEEEKImqYoimIcx7IsSZIQAlmWlFKEEFJKeZ5TSgkhhBCUUgBSSpZlCSEhhGEYhBAURSHERFG03W7X6/VyuRwAgM/ncRyXy+VyuVwul8Fg0Ol0cByXy+U8z7vd7nA4bDYbYRimUqmUUmVZ1ul0Op1Op9PpdDqdTqfT6XQ6nU6n0+l0Op1Op9PpdDqdTqfT6XQ6nU6n0+l0Op1Op9PpdDqdTqfT6XQ6nU6n0+l0Op1Op9PpdDqdTqfT6XQ6nU6n0+l0Op1Op9PpdDqdTqfT6XQ6nU6n0+l0Op1Op9PpdDqdTqfT6XQ6nU6n0+l0Op1Op9PpdDqdTqfT6XQ6nU6n0+l0Op1Op9PpdDqdTqfT6XQ6nU6n0+l0Op1Op9PpdDqdTqfT6XQ6nU6n0+l0Op1Op9PpdDqdTqfT6XQ6nU6n0+l0Op1Op9PpdDqdTqfT6XQ6nU6n0+l0Op1Op9PpdDqdTqfT6XQ6nU6nU+l0WlXVcZxCoRBCjDGllNfrtVqtqqq6LMuSJFmW1XW9XC5jDDDGwzAMw3Q6nUqlUqlUoVAohBDGGI7jdru9Wq1arVZYlrVarcYYsiz7vo8Qvu8hhEajQSGEEFJKuVwulUrpdDqdTsfzPMMwUsoYQ8uyCCGaZhiGSZKEEEIIIUIIIUIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEML/Tf4BvL1sU2rYkYkAAAAASUVORK5CYII=">
  <img id="sticker-cloud" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAaVBMVEX///8AAAD8/Pzw8PCGhoYNDQ3y8vKysrITExP09PTp6em7u7ulpaWtra3FxcXNzc0/Pz8TExPZ2dmBgYEbGxuioqJ6enqenp5NTU1bW1uIiIgYGBhpaWmZmZlVVVUhISHm5uZGRkY1NTUvLy+vve5fAAADhklEQVR4nO3d4XqiMBQGYCwQFRIVF0Wx/v9/3VADiZ1pZ87n/b5nEplMJrWehwAAAAAAAAAAAAAAAMDPSkdH56eSJL/xer3x+Pg4/nh8fPyk1+vvSqXyC5IkLMvSNE0I8fPzc0qpKIrVarVarbquE0JBEFmWdU3TdDqdTqcjhHAch5SiKIqiyHEcQohpmizLsixjDBzHruvK5XLz8/Msy7IsS5bldrudIAiKoiiKIgDAcZwiigAApZQBAFmWKYXValVVVZIkhBCllCiKpmmEEADAOI4AQAgBADAMAADGGAAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAQGtraxtCCCEsy7quh8NhvV6n0+lqtVqtVpIkRVGmaZqmKY7jNE2SJDAMAwDquuM4TqlUKpVK4XBYlWWdThdCCCGEEEKlUnmeV2q1Xq+Xz+eTySQIgiRJsq5rNpsjhHmeJ0lCCCEIAkIIpmkyDSGEEMdxpRQhhGEYiqKEEOI4juN4Pp9TSjDGGEbRdd1yuRwiqVQq4XBYrVZVVXEcJUmSJEmSJAAAyWQyx3GdTifLsqZpSqmSJClJEgCllCzLkiQhhBBCiFJKURRBEBiGKYoSicSkUqlyuRwAQJZllmVBEHieV1XVarVCCLFYLMdxOp2OYRjHcVmWIAhhGEIIpmmqquq6zmaz2Ww2nU4nSQIAMIxBpVLBYDBcLleWZVmWUso0TeM4FEVBEERVVZIkNE07ODg4Ozs7Ozt7eHh4fHz88fExGAxmZmZWV1dXV1dXV1dTU1NjY2NTU1NjY2OTk5NHjx4dHR0dHR398/Pz8fExGAzW1tZWV1fHx8eHh4fT09NrampmZmYODg4ODg4mkymKouM4pmmEEKWU6XQaDocDAwNDQ0O7u7vb29sLhcJyuVwul9vt9uHh4bNnzx4+fPj8+fMPHz7c3d1durq6urp6cnJydHT07NmzgYGBVCoVEUIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEeF/8AzM7cNQy+y/eAAAAAElFTkSuQmCC">
  <img id="sticker-lollipop" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAaVBMVEX///8AAAD8/Pzw8PCGhoYNDQ3y8vKysrITExP09PTp6em7u7ulpaWtra3FxcXNzc0/Pz8TExPZ2dmBgYEbGxuioqJ6enqenp5NTU1bW1uIiIgYGBhpaWmZmZlVVVUhISHm5uZGRkY1NTUvLy+vve5fAAADNElEQVR4nO3d4XKiMBQGYCwQFRIVF0Wx/v9/3VADiZ1pZ87n/b5nEplMJrWehwAAAAAAAAAAAAAAAMDPSkdH56eSJL/xer3x+Pg4/nh8fPyk1+vvSqXyC5IkLMvSNE0I8fPzc0qpKIrVarVarbquE0JBEFmWdU3TdDqdTqcjhHAch5SiKIqiyHEcQohpmizLsixjDBzHruvK5XLz8/Msy7IsS5bldrudIAiKoiiKIgDAcZwiigAApZQBAFmWKYXValVVVZIkhBCllCiKpmmEEADAOI4AQAgBADAMAADGGAAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAQGtraxtCCCEsy7quh8NhvV6n0+lqtVqtVpIkRVGmaZqmKY7jNE2SJDAMAwDquuM4TqlUKpVK4XBYlWWdThdCCCGEEEKlUnmeV2q1Xq+Xz+eTySQIgiRJsq5rNpsjhHmeJ0lCCCEIAkIIpmkyDSGEEMdxpRQhhGEYiqKEEOI4juN4Pp9TSjDGGEbRdd1yuRwiqVQq4XBYrVZVVXEcJUmSJEmSJAAAyWQyx3GdTifLsqZpSqmSJClJEgCllCzLkiQhhBBCiFJKURRBEBiGKYoSicSkUqlyuRwAQJZllmVBEHieV1XVarVCCLFYLMdxOp2OYRjHcVmWIAhhGEIIpmmqquq6zmaz2Ww2nU4nSQIAMIxBpVLBYDBcLleWZVmWUso0TeM4FEVBEERVVZIkNE07ODg4Ozs7Ozt7eHh4fHz88fExGAxmZmZWV1dXV1dXV1dTU1NjY2NTU1NjY2OTk5NHjx4dHR0dHR398/Pz8fExGAzW1tZWV1fHx8eHh4fT09NrampmZmYODg4ODg4mkymKouM4pmmEEKWU6XQaDocDAwNDQ0O7u7vb29sLhcJyuVwul9vt9uHh4bNnzx4+fPj8+fMPHz7c3d1durq6urp6cnJydHT07NmzgYGBVCoVEUIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEeF/8AzM7cNQy+y/eAAAAAElFTkSuQmCC">
  <img id="sticker-cupcake" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAaVBMVEX///8AAAD8/Pzw8PCGhoYNDQ3y8vKysrITExP09PTp6em7u7ulpaWtra3FxcXNzc0/Pz8TExPZ2dmBgYEbGxuioqJ6enqenp5NTU1bW1uIiIgYGBhpaWmZmZlVVVUhISHm5uZGRkY1NTUvLy+vve5fAAADVElEQVR4nO3d23LiMBRGYSBCVFAExUUUi+L//+gGlGAn9pDs9q3l4/M0w0zIZLLpNR4AAAAAAAAAAAAAAACAe+ro6EjdNf3S6/WPj8fj94/H4+/1dV2EEFZVVbIsQwiTySQEQiKReDwez/O+KIqmaUqShMPhMpvNhBBBEARBkCRJwzAIISiKgiAIvu9FUYwxvu+TJGma5vF4oiiKoqgQwqZpvu9jGOZ53nUdpZTzPEIIHMfpOE4pFUUhhCiKQghFUbIsY4xFUUhSlFKEEEKImqYoimIcx7IsSZIQAlmWlFKEEFJKeZ5TSgkhhBCUUgBSSpZlCSEhhGEYhBAURSHERFG03W7X6/VyuRwAgM/ncRyXy+VyuVwul8Fg0Ol0cByXy+U8z7vd7nA4bDYbYRimUqmUUmVZ1ul0Op1Op9PpdDqdTqfT6XQ6nU6n0+l0Op1Op9PpdDqdTqfT6XQ6nU6n0+l0Op1Op9PpdDqdTqfT6XQ6nU6n0+l0Op1Op9PpdDqdTqfT6XQ6nU6n0+l0Op1Op9PpdDqdTqfT6XQ6nU6n0+l0Op1Op9PpdDqdTqfT6XQ6nU6n0+l0Op1Op9PpdDqdTqfT6XQ6nU6n0+l0Op1Op9PpdDqdTqfT6XQ6nU6n0+l0Op1Op9PpdDqdTqfT6XQ6nU6n0+l0Op1Op9PpdDqdTqfT6XQ6nU6n0+l0Op1Op9PpdDqdTqfT6XQ6nU6n0+l0Op1Op9PpdDqdTqfT6XQ6nU6nU+l0WlXVcZxCoRBCjDGllNfrtVqtqqq6LMuSJFmW1XW9XC5jDDDGwzAMw3Q6nUqlUqlUoVAohBDGGI7jdru9Wq1arVZYlrVarcYYsiz7vo8Qvu8hhEajQSGEEFJKuVwulUrpdDqdTsfzPMMwUsoYQ8uyCCGaZhiGSZKEEEIIIUIIIUIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEML/Tf4BvL1sU2rYkYkAAAAASUVORK5CYII=">
  <img id="sticker-gift" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAaVBMVEX///8AAAD8/Pzw8PCGhoYNDQ3y8vKysrITExP09PTp6em7u7ulpaWtra3FxcXNzc0/Pz8TExPZ2dmBgYEbGxuioqJ6enqenp5NTU1bW1uIiIgYGBhpaWmZmZlVVVUhISHm5uZGRkY1NTUvLy+vve5fAAADTUlEQVR4nO3dyXKiMBQGYCwQFRIVF0Wx/v9/3VADiZ1pZ87n/b5nEplMJrWehwAAAAAAAAAAAAAAAMDPSkdH56eSJL/xer3x+Pg4/nh8fPyk1+vvSqXyC5IkLMvSNE0I8fPzc0qpKIrVarVarbquE0JBEFmWdU3TdDqdTqcjhHAch5SiKIqiyHEcQohpmizLsixjDBzHruvK5XLz8/Msy7IsS5bldrudIAiKoiiKIgDAcZwiigAApZQBAFmWKYXValVVVZIkhBCllCiKpmmEEADAOI4AQAgBADAMAADGGAAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAABhjAABgjAEAgDEGAACMMQAAxhgAQGtraxtCCCEsy7quh8NhvV6n0+lqtVqtVpIkRVGmaZqmKY7jNE2SJDAMAwDquuM4TqlUKpVK4XBYlWWdThdCCCGEEEKlUnmeV2q1Xq+Xz+eTySQIgiRJsq5rNpsjhHmeJ0lCCCEIAkIIpmkyDSGEEMdxpRQhhGEYiqKEEOI4juN4Pp9TSjDGGEbRdd1yuRwiqVQq4XBYrVZVVXEcJUmSJEmSJAAAyWQyx3GdTifLsqZpSqmSJClJEgCllCzLkiQhhBBCiFJKURRBEBiGKYoSicSkUqlyuRwAQJZllmVBEHieV1XVarVCCLFYLMdxOp2OYRjHcVmWIAhhGEIIpmmqquq6zmaz2Ww2nU4nSQIAMIxBpVLBYDBcLleWZVmWUso0TeM4FEVBEERVVZIkNE07ODg4Ozs7Ozt7eHh4fHz88fExGAxmZmZWV1dXV1dXV1dTU1NjY2NTU1NjY2OTk5NHjx4dHR0dHR398/Pz8fExGAzW1tZWV1fHx8eHh4fT09NrampmZmYODg4ODg4mkymKouM4pmmEEKWU6XQaDocDAwNDQ0O7u7vb29sLhcJyuVwul9vt9uHh4bNnzx4+fPj8+fMPHz7c3d1durq6urp6cnJydHT07NmzgYGBVCoVEUIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEeF/8AzM7cNQy+y/eAAAAAElFTkSuQmCC">
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const TIME_LIMIT = 20;
  const MAX_PHOTOS = 10;
  const MAX_SELECTIONS = 6;
  let timer;
  let timeLeft = TIME_LIMIT;
  let photoCount = 0;
  let isSessionActive = false;
  let currentFilter = 'none';
  const loginContainer = document.getElementById('loginContainer');
  const photoboothApp = document.getElementById('photoboothApp');
  const loginButton = document.getElementById('loginButton');
  const usernameInput = document.getElementById('username');
  const passwordInput = document.getElementById('password');
  const loginError = document.getElementById('loginError');
  const video = document.getElementById('video');
  const canvas = document.getElementById('canvas');
  const context = canvas.getContext('2d');
  const photoGallery = document.getElementById('photoGallery');
  const selectedCountSpan = document.getElementById('selectedCount');
  const startButton = document.getElementById('startButton');
  const takePhotoBtn = document.getElementById('takePhotoBtn');
  const restartButton = document.getElementById('restartButton');
  const downloadButton = document.getElementById('downloadButton');
  const timerDisplay = document.getElementById('timerDisplay');
  const photoCountDisplay = document.getElementById('photoCountDisplay');
  const selectionMessage = document.getElementById('selectionMessage');
  const filterButtons = document.querySelectorAll('#filterControls .filter-btn');

  // KH√îNG C·∫¶N loadStickers() n·ªØa
  
  loginButton.addEventListener('click', function() {
    const username = usernameInput.value;
    const password = passwordInput.value;
    if (username === 'Nguyentranphuongthy' && password === '07022007') {
      loginContainer.classList.add('hidden');
      photoboothApp.style.display = 'flex';
      photoboothApp.classList.remove('hidden');
      
      // Ch·∫°y camera tr·ª±c ti·∫øp
      startCamera();
      resetUI();
      
    } else {
      loginError.textContent = 'Sai t√™n ƒëƒÉng nh·∫≠p ho·∫∑c m·∫≠t kh·∫©u r√πi nhaaa :33';
    }
  });
  
  startButton.addEventListener('click', startSession);
  takePhotoBtn.addEventListener('click', takePhoto);
  restartButton.addEventListener('click', restartSession);
  downloadButton.addEventListener('click', downloadSelectedPhotos);
  
  filterButtons.forEach(button => {
    button.addEventListener('click', () => {
      const filter = button.dataset.filter;
      applyFilter(filter);
    });
  });
  
  function startCamera() {
    let constraints = {
      video: {
        width: { ideal: 1920 },
        height: { ideal: 1080 },
        facingMode: 'user'
      }
    };

    navigator.mediaDevices.getUserMedia(constraints)
    .then(stream => {
      video.srcObject = stream;
    }).catch(error => {
      console.error('L·ªói khi l·∫•y camera 1920x1080:', error);
      navigator.mediaDevices.getUserMedia({ video: true, audio: false })
        .then(stream => {
          video.srcObject = stream;
        }).catch(err2 => {
          alert('Kh√¥ng th·ªÉ truy c·∫≠p camera: ' + err2.message);
        });
    });
  }
  
  function applyFilter(filter) {
    let filterValue = 'none';
    switch (filter) {
      case 'vintage':
        filterValue = 'sepia(80%) contrast(110%) saturate(90%) brightness(95%)';
        break;
      case 'warm':
        filterValue = 'sepia(40%) saturate(150%) brightness(105%) hue-rotate(-10deg)';
        break;
      case 'cool':
        filterValue = 'grayscale(20%) contrast(110%) brightness(105%) hue-rotate(10deg)';
        break;
      case 'none':
      default:
        filterValue = 'none';
    }
    video.style.filter = filterValue;
    currentFilter = filterValue;
  }
  
  function resetUI() {
    clearInterval(timer);
    photoGallery.innerHTML = '';
    timeLeft = TIME_LIMIT;
    photoCount = 0;
    isSessionActive = false;
    timerDisplay.textContent = timeLeft;
    photoCountDisplay.textContent = `0 / ${MAX_PHOTOS}`;
    selectedCountSpan.textContent = '0';
    selectionMessage.textContent = '';
    video.style.filter = 'none';
    currentFilter = 'none';
    startButton.classList.remove('hidden');
    takePhotoBtn.classList.add('hidden');
    restartButton.classList.add('hidden');
    downloadButton.disabled = true;
    disableCheckboxes(true);
  }
  
  function startSession() {
    isSessionActive = true;
    startButton.classList.add('hidden');
    takePhotoBtn.classList.remove('hidden');
    restartButton.classList.remove('hidden');
    timer = setInterval(updateTimer, 1000);
  }
  
  function updateTimer() {
    timeLeft--;
    timerDisplay.textContent = timeLeft;
    if (timeLeft <= 0) {
      endSession();
    }
  }
  
  function endSession() {
    clearInterval(timer);
    isSessionActive = false;
    timerDisplay.textContent = "H·∫øt gi·ªù :)))";
    takePhotoBtn.classList.add('hidden');
    disableCheckboxes(false);
    downloadButton.disabled = false;
    alert(`ƒê√£ h·∫øt! Em ƒë√£ ch·ª•p ${photoCount} ·∫£nh. Gi·ªù h√£y ch·ªçn t·ªëi ƒëa ${MAX_SELECTIONS} ·∫£nh ƒë·∫πp nh·∫•t.`);
  }
  
  function restartSession() {
    if (confirm('Em c√≥ ch·∫Øc mu·ªën l√†m l·∫°i hongg. To√†n b·ªô ·∫£nh ƒë√£ ch·ª•p s·∫Ω b·ªã x√≥a √° :))).')) {
      resetUI();
    }
  }
  
  function disableCheckboxes(isDisabled) {
    const checkboxes = document.querySelectorAll('.photo-item input[type="checkbox"]');
    checkboxes.forEach(cb => {
      cb.disabled = isDisabled;
    });
  }

  
  function takePhoto() {
    if (!isSessionActive || photoCount >= MAX_PHOTOS) {
      return;
    }
    photoCount++;
    photoCountDisplay.textContent = `${photoCount} / ${MAX_PHOTOS}`;
    
    const vWidth = video.videoWidth;
    const vHeight = video.videoHeight;
    const vRatio = vWidth / vHeight;
    
    const targetWidth = 1920;
    const targetHeight = 1080;
    const targetRatio = targetWidth / targetHeight;
    
    canvas.width = targetWidth;
    canvas.height = targetHeight;
    
    let sWidth, sHeight, sX, sY;

    if (vRatio > targetRatio) {
        sHeight = vHeight;
        sWidth = vHeight * targetRatio;
        sX = (vWidth - sWidth) / 2;
        sY = 0;
    } else {
        sWidth = vWidth;
        sHeight = vWidth / targetRatio;
        sX = 0;
        sY = (vHeight - sHeight) / 2;
    }
    
    context.filter = currentFilter;
    context.drawImage(
        video,
        sX, sY, sWidth, sHeight,
        0, 0, targetWidth, targetHeight
    );
    context.filter = 'none';
    
    const dataURL = canvas.toDataURL('image/png');
    addPhotoToGallery(dataURL);
    
    if (photoCount >= MAX_PHOTOS) {
      endSession();
    }
  }
  
  function addPhotoToGallery(dataURL) {
    const photoItem = document.createElement('div');
    photoItem.className = 'photo-item';
    photoItem.innerHTML = `<img src="${dataURL}" style="transform: scaleX(-1);">`;
    
    const actions = document.createElement('div');
    actions.className = 'photo-actions';
    const checkbox = document.createElement('input');
    checkbox.type = 'checkbox';
    checkbox.disabled = true;
    checkbox.onchange = (e) => updateSelectedCount(e);
    
    actions.appendChild(checkbox);
    photoItem.appendChild(actions);
    photoGallery.appendChild(photoItem);
  }
  
  function updateSelectedCount(event) {
    const checkboxes = document.querySelectorAll('.photo-item input[type="checkbox"]');
    let count = 0;
    checkboxes.forEach(cb => {
      if (cb.checked) count++;
    });
    if (count > MAX_SELECTIONS) {
      event.target.checked = false;
      count--;
      selectionMessage.textContent = `Em ch·ªâ ƒë∆∞·ª£c ch·ªçn t·ªëi ƒëa ${MAX_SELECTIONS} ·∫£nh!`;
      setTimeout(() => {
        selectionMessage.textContent = '';
      }, 2000);
    } else {
      selectionMessage.textContent = '';
    }
    selectedCountSpan.textContent = count;
  }
  
  function downloadSelectedPhotos() {
    const checkedBoxes = document.querySelectorAll('.photo-item input[type="checkbox"]:checked');
    if (checkedBoxes.length !== MAX_SELECTIONS) {
      alert(`Em c·∫ßn ph·∫£i ch·ªçn ƒê√öNG ${MAX_SELECTIONS} ·∫£nh ƒë·ªÉ gh√©p khung nhaaa`);
      return;
    }
    const imageSources = [];
    checkedBoxes.forEach(cb => {
      const img = cb.closest('.photo-item').querySelector('img');
      imageSources.push(img.src);
    });
    // G·ªçi h√†m V·∫º KHUNG M·ªöI
    composeAndDownload(imageSources);
  }
  
  // === H√ÄM V·∫º KHUNG ·∫¢NH M·ªöI (R·∫§T QUAN TR·ªåNG) ===
  async function composeAndDownload(imageSources) {
    
    const finalCanvas = document.createElement('canvas');
    const ctx = finalCanvas.getContext('2d');
    
    const finalWidth = 1920;
    const finalHeight = 1080;
    
    finalCanvas.width = finalWidth;
    finalCanvas.height = finalHeight;
    
    // 1. V·∫Ω n·ªÅn gradient (h·ªìng -> t√≠m nh·∫°t)
    const gradient = ctx.createLinearGradient(0, 0, finalWidth, finalHeight);
    gradient.addColorStop(0, '#FFC0CB'); // Pink
    gradient.addColorStop(1, '#E6E6FA'); // Lavender
    ctx.fillStyle = gradient;
    ctx.fillRect(0, 0, finalWidth, finalHeight);
    
    // 2. T·∫£i 6 t·∫•m ·∫£nh ƒë√£ ch·ªçn
    const imagePromises = imageSources.map(src => {
      return new Promise((resolve, reject) => {
        const img = new Image();
        img.onload = () => resolve(img);
        img.onerror = reject;
        img.src = src;
      });
    });
    const loadedImages = await Promise.all(imagePromises);

    // 3. T√≠nh to√°n b·ªë c·ª•c 3x2 (3 c·ªôt, 2 h√†ng)
    const gridPadding = 25;
    const gridWidth = 1600;
    const gridHeight = 825;
    
    const photoWidth = (gridWidth - (gridPadding * 4)) / 3;
    const photoHeight = (gridHeight - (gridPadding * 3)) / 2;
                                                             
    const gridX = (finalWidth - gridWidth) / 2;
    const gridY = (finalHeight - gridHeight) / 2;
    
    // V·∫Ω khung tr·∫Øng b√™n d∆∞·ªõi
    ctx.fillStyle = 'white';
    ctx.shadowColor = 'rgba(0, 0, 0, 0.3)';
    ctx.shadowBlur = 20;
    
    // Fallback cho roundRect (m·ªôt s·ªë tr√¨nh duy·ªát c√≥ th·ªÉ kh√¥ng h·ªó tr·ª£)
    if (ctx.roundRect) {
      ctx.beginPath();
      ctx.roundRect(gridX - gridPadding, gridY - gridPadding, gridWidth + (gridPadding * 2), gridHeight + (gridPadding * 2), 30);
      ctx.fill();
    } else {
      ctx.fillRect(gridX - gridPadding, gridY - gridPadding, gridWidth + (gridPadding * 2), gridHeight + (gridPadding * 2));
    }
    ctx.shadowColor = 'transparent';

    // 4. V·∫Ω 6 t·∫•m ·∫£nh
    let imageIndex = 0;
    for (let row = 0; row < 2; row++) {
      for (let col = 0; col < 3; col++) {
        if (!loadedImages[imageIndex]) continue;
        
        const x = gridX + (gridPadding * (col + 1)) + (photoWidth * col);
        const y = gridY + (gridPadding * (row + 1)) + (photoHeight * row);
        
        const img = loadedImages[imageIndex];
        const imgRatio = img.width / img.height; // 1.777 (16:9)
        const frameRatio = photoWidth / photoHeight; // 1.333 (4:3)
        
        let sWidth, sHeight, sX, sY;
        
        // C·∫Øt ·∫£nh 16:9 cho v·ª´a khung 4:3
        sHeight = img.height;
        sWidth = img.height * frameRatio;
        sX = (img.width - sWidth) / 2;
        sY = 0;
        
        ctx.save();
        ctx.beginPath();
        if (ctx.roundRect) {
            ctx.roundRect(x, y, photoWidth, photoHeight, 15);
            ctx.clip();
        } else {
            ctx.rect(x, y, photoWidth, photoHeight);
            ctx.clip();
        }
        
        ctx.drawImage(
            img,
            sX, sY, sWidth, sHeight,
            x, y, photoWidth, photoHeight
        );
        ctx.restore();
        
        // V·∫Ω vi·ªÅn
        ctx.strokeStyle = '#ffb6c1';
        ctx.lineWidth = 4;
        if (ctx.roundRect) {
            ctx.beginPath();
            ctx.roundRect(x, y, photoWidth, photoHeight, 15);
            ctx.stroke();
        } else {
            ctx.strokeRect(x, y, photoWidth, photoHeight);
        }
        
        imageIndex++;
      }
    }
    
    // 5. V·∫Ω Stickers (L·∫•y t·ª´ HTML)
    const stickerBear = document.getElementById('sticker-bear');
    const stickerCat = document.getElementById('sticker-cat');
    const stickerFrog = document.getElementById('sticker-frog');
    const stickerCloud = document.getElementById('sticker-cloud');
    const stickerLollipop = document.getElementById('sticker-lollipop');
    const stickerCupcake = document.getElementById('sticker-cupcake');
    const stickerGift = document.getElementById('sticker-gift');
    
    ctx.globalAlpha = 0.95;
    try {
      if (stickerCloud) ctx.drawImage(stickerCloud, 40, 40, 150, 100);
      if (stickerCupcake) ctx.drawImage(stickerCupcake, 200, 110, 80, 80);
      if (stickerFrog) ctx.drawImage(stickerFrog, 1730, 40, 130, 110);
      if (stickerCat) ctx.drawImage(stickerCat, 1710, 880, 150, 150);
      if (stickerLollipop) ctx.drawImage(stickerLollipop, 1630, 890, 120, 120);
      if (stickerBear) ctx.drawImage(stickerBear, 40, 880, 150, 150);
      if (stickerGift) ctx.drawImage(stickerGift, 180, 920, 100, 100);
    } catch (e) {
      console.error("L·ªói khi v·∫Ω sticker (·∫£nh c√≥ th·ªÉ ch∆∞a t·∫£i xong):", e);
      // Ti·∫øp t·ª•c d√π sticker c√≥ l·ªói
    }
    ctx.globalAlpha = 1.0;

    ctx.font = '50px Arial';
    ctx.fillStyle = '#ff69b4';
    ctx.fillText('‚ô´ ‚ô™', 1650, 80);
    
    // 6. V·∫Ω tr√°i tim
    function drawHeart(x, y, size, color) {
        ctx.fillStyle = color;
        ctx.beginPath();
        ctx.moveTo(x, y + size / 4);
        ctx.quadraticCurveTo(x, y, x + size / 4, y);
        ctx.quadraticCurveTo(x + size / 2, y, x + size / 2, y + size / 4);
        ctx.quadraticCurveTo(x + size / 2, y, x + (size * 3/4), y);
        ctx.quadraticCurveTo(x + size, y, x + size, y + size / 4);
        ctx.quadraticCurveTo(x + size, y + size / 2, x + size / 2, y + size * 3/4);
        ctx.quadraticCurveTo(x, y + size / 2, x, y + size / 4);
        ctx.fill();
    }
    
    drawHeart(300, 50, 40, '#FF69B4');
    drawHeart(1550, 90, 30, '#FF69B4');
    drawHeart(1800, 300, 50, '#FF69B4');
    drawHeart(100, 500, 35, '#FFB6C1');
    drawHeart(50, 800, 40, '#FF69B4');
    drawHeart(1600, 850, 30, '#FFB6C1');
    drawHeart(1850, 700, 40, '#FF69B4');
    
    // 7. T·∫£i ·∫£nh v·ªÅ
    const finalDataURL = finalCanvas.toDataURL('image/png');
    const a = document.createElement('a');
    a.href = finalDataURL;
    a.download = 'photobooth_phuongthy_frame.png';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
  }
  
});
</script>
</body>
</html>
